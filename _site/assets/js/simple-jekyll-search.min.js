/*!
  * Simple-Jekyll-Search v1.10.0 (https://github.com/christian-fei/Simple-Jekyll-Search)
  * Copyright 2015-2020, Christian Fei
  * Licensed under the MIT License.
  */
!function(){"use strict";var u={compile:function(n){return e.template.replace(e.pattern,function(e,t){var r=e.substr(1,e.length-2);return n[r]||t})},setTemplate:function(e){this.template=e},setPattern:function(e){this.pattern=e}};const e={pattern:/\{(.*?)\}/g,template:"<a href='{url}' title='{desc}'>{title}</a>"};var n={merge:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n],"object"==typeof e[n]&&Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=this.merge(e[n],t[n])));for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n],"object"==typeof t[n]&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=this.merge(e[n],t[n])));return r},isJSON:function(e){try{return e instanceof Object&&JSON.parse(JSON.stringify(e))?!0:!1}catch(e){return!1}}};function i(e){return Boolean(e)&&"[object String]"===Object.prototype.toString.call(e)}function t(e){return Boolean(e)&&"[object Array]"===Object.prototype.toString.call(e)}function r(e){return function(e){return Boolean(e)&&"[object Object]"===Object.prototype.toString.call(e)}(e)&&t(e.results)}function o(e){let t=e.length;for(;t;)t-=1,this.items.push(e[t])}function s(){return this.items.length}function l(){return this.items.splice(0)[0]}function a(e){this.element=document.querySelector(e)}function c(e){this.store=e||[]}function p(e){this._config=n.merge({searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(e,t){return e.string.toLowerCase().localeCompare(t.string.toLowerCase())},noResultsText:"No results found",limit:10,fuzzy:!1,debounceTime:null},e),this._requiredConfig(["searchInput","resultsContainer","json"]),this._config.success instanceof Function&&this.on("success",this._config.success),this._init()}c.prototype={put:function(e){if(t(e))return o.call(this,e);e&&i(e)<0&&(e=this._serialize(e)),this.store.push(e)},clear:function(){this.store.length=0},get:function(){return this.store},_serialize:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=i(e[t])?e[t].toLowerCase():e[t]);return e}},a.prototype={on:function(e,t){var r=this.element;r.addEventListener?r.addEventListener(e,t):r.attachEvent("on"+e,t)},get:function(){return this.element.value},set:function(e){this.element.value=e}},p.prototype={_init:function(){var e=this;this._searchInput=new a(this._config.searchInput),this._resultsContainer=document.querySelector(this._config.resultsContainer),this._config.json.then?this._config.json.then(function(t){e._config.json=t,e._initStore()}):this._config.json.length?(u.setTemplate(this._config.searchResultTemplate),this._initStore()):this._config.json&&(this._config.json=JSON.parse(this._config.json),this._initStore()),this._config.debounceTime?this._searchInput.on("input",function(t){e._handleInput(t)}):this._searchInput.on("input",function(t){e._search(t)})},_initStore:function(){var e=this;this._store=new c,this._addResults(this._config.json),this._config.json.then?this._config.json.then(function(){e.trigger("ready")}):this.trigger("ready")},_addResults:function(e){e&&t(e)&&e.length&&this._store.put(e)},_handleInput:function(e){var t=this;clearTimeout(this._debounceTimer),this._debounceTimer=setTimeout(function(){t._search(e)},this._config.debounceTime)},_search:function(e){var t=e.target.value;r(this._store)?this._searchJson(t):this._searchData(t)},_searchData:function(e){var t=this;if(e.length){var r=this._config.fuzzy?this._getFuzzySearch(e):this._getExactSearch(e);this._renderResults(r)}else this._clearResults()},_searchJson:function(e){var t=this;fetch(this._config.json).then(function(e){return e.json()}).then(function(e){var r=new c;e.forEach(function(e){r.put(e)}),t._store=r,t._searchData(e)})},_getExactSearch:function(e){var t=this._store.get(),r=[],n=e.trim().toLowerCase().split(/\s+/),o=t.length;for(;o;)o-=1;var s=t[o],l=this._config.score(s,n);void 0!==l&&(s.score=l,r.push(s));return r.sort(function(e,t){return e.score-t.score}),r.splice(0,this._config.limit)},_getFuzzySearch:function(e){if(this._config.json.length)return this._fuzzySearchJson(e);var t=this._store.get(),r=[],n=e.trim().toLowerCase().split(/\s+/),o=t.length;for(;o;)o-=1;var s=t[o];if(this._config.fuzzy){var l=new RegExp(n.join("|"),"gi");s.string.match(l)&&r.push(s)}else{var a=this._config.score(s,n);void 0!==a&&(s.score=a,r.push(s))}return r.sort(function(e,t){return e.score-t.score}),r.splice(0,this._config.limit)},_fuzzySearchJson:function(e){var t=this,r=[];return fetch(this._config.json).then(function(n){return n.json()}).then(function(n){n.forEach(function(n){var o=n.title.toLowerCase().includes(e.toLowerCase())||n.content&&n.content.toLowerCase().includes(e.toLowerCase());o&&r.push(n)}),r=r.slice(0,t._config.limit),t._renderResults(r)})},_renderResults:function(e){var t=this;this._clearResults(),e.length?e.forEach(function(e){t._resultsContainer.innerHTML+=u.compile(t._parseResult(e))}):this._displayNoResults()},_parseResult:function(e){return{title:e.title,url:e.url,desc:e.excerpt}},_clearResults:function(){this._resultsContainer.innerHTML=""},_displayNoResults:function(){this._resultsContainer.innerHTML=this._config.noResultsText},on:function(e,t){this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t)},trigger:function(e){this.events&&this.events[e]&&this.events[e].forEach(function(e){e.apply(this,[].slice.call(arguments,1))}.bind(this))}};const d=function(t={}){return new p({searchInput:t.searchInput||"#search-input",resultsContainer:t.resultsContainer||"#search-results",json:t.json||"/search.json",searchResultTemplate:t.searchResultTemplate||'<li><a href="{url}">{title}</a><span class="search-meta">{date}</span><p>{excerpt}</p></li>',templateMiddleware:t.templateMiddleware,noResultsText:t.noResultsText||"<li>No results found</li>",limit:t.limit||10,fuzzy:t.fuzzy||!1,debounceTime:t.debounceTime||null})};window.SimpleJekyllSearch=d}();
